"use strict";async function initializeNotificationChannels(){const e=[],r=[];NotificationService_2.notificationService.registerChannel("IN_APP",new InAppChannel_2.InAppChannel);e.push("IN_APP");NotificationService_2.notificationService.registerChannel("EMAIL",new EmailChannel_2.EmailChannel);e.push("EMAIL");const n=process.env.APP_TWILIO_ACCOUNT_SID;if(n&&n.startsWith("AC")&&process.env.APP_TWILIO_AUTH_TOKEN){const n=new SMSChannel_2.SMSChannel;if(n.validateConfig()){NotificationService_2.notificationService.registerChannel("SMS",n);e.push("SMS")}else r.push("SMS")}else r.push("SMS");const t=process.env.FCM_PROJECT_ID||process.env.FCM_SERVICE_ACCOUNT_PATH,i=process.env.VAPID_PUBLIC_KEY&&process.env.VAPID_PRIVATE_KEY;let o=[];if(t||i){const n=new PushChannel_2.PushChannel;if(n.validateConfig()){NotificationService_2.notificationService.registerChannel("PUSH",n);e.push("PUSH");n.hasFCMProvider()&&o.push("FCM");n.hasWebPushProvider()&&o.push("WebPush")}else r.push("PUSH")}else r.push("PUSH");const a=o.length>0?` (${o.join(", ")})`:"",s=e.map(e=>"PUSH"===e?`PUSH${a}`:e).join(", ");console.log(`[NotificationService] Channels: ${s}`);try{const{CacheManager:r}=await Promise.resolve().then(()=>__importStar(require("@b/utils/cache"))),n=r.getInstance();await n.updateSetting("emailChannelStatus",e.includes("EMAIL")?"true":"false");await n.updateSetting("smsChannelStatus",e.includes("SMS")?"true":"false");await n.updateSetting("pushChannelStatus",e.includes("PUSH")?"true":"false")}catch(e){console.error("[NotificationService] Failed to save channel status to settings:",e)}}var __createBinding=this&&this.__createBinding||(Object.create?function(e,r,n,t){void 0===t&&(t=n);var i=Object.getOwnPropertyDescriptor(r,n);i&&!("get"in i?!r.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return r[n]}});Object.defineProperty(e,t,i)}:function(e,r,n,t){void 0===t&&(t=n);e[t]=r[n]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),__exportStar=this&&this.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||__createBinding(r,e,n)},__importStar=this&&this.__importStar||function(){var e=function(r){e=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r};return e(r)};return function(r){if(r&&r.__esModule)return r;var n={};if(null!=r)for(var t=e(r),i=0;i<t.length;i++)"default"!==t[i]&&__createBinding(n,r,t[i]);__setModuleDefault(n,r);return n}}();Object.defineProperty(exports,"__esModule",{value:!0});exports.PushTemplateEngine=exports.pushTemplateEngine=exports.SMSTemplateEngine=exports.smsTemplateEngine=exports.TemplateEngine=exports.templateEngine=exports.NotificationQueue=exports.notificationQueue=exports.WebPushProvider=exports.FCMProvider=exports.BasePushProvider=exports.TwilioProvider=exports.BaseSMSProvider=exports.NodemailerProvider=exports.SendGridProvider=exports.BaseEmailProvider=exports.PushChannel=exports.SMSChannel=exports.EmailChannel=exports.InAppChannel=exports.BaseChannel=exports.redisCache=exports.notificationService=exports.NotificationService=void 0;exports.initializeNotificationChannels=initializeNotificationChannels;var NotificationService_1=require("./NotificationService");Object.defineProperty(exports,"NotificationService",{enumerable:!0,get:function(){return NotificationService_1.NotificationService}});Object.defineProperty(exports,"notificationService",{enumerable:!0,get:function(){return NotificationService_1.notificationService}});__exportStar(require("./types"),exports);__exportStar(require("./errors"),exports);__exportStar(require("./utils/preferences"),exports);var RedisCache_1=require("./cache/RedisCache");Object.defineProperty(exports,"redisCache",{enumerable:!0,get:function(){return RedisCache_1.redisCache}});var BaseChannel_1=require("./channels/BaseChannel");Object.defineProperty(exports,"BaseChannel",{enumerable:!0,get:function(){return BaseChannel_1.BaseChannel}});var InAppChannel_1=require("./channels/InAppChannel");Object.defineProperty(exports,"InAppChannel",{enumerable:!0,get:function(){return InAppChannel_1.InAppChannel}});var EmailChannel_1=require("./channels/EmailChannel");Object.defineProperty(exports,"EmailChannel",{enumerable:!0,get:function(){return EmailChannel_1.EmailChannel}});var SMSChannel_1=require("./channels/SMSChannel");Object.defineProperty(exports,"SMSChannel",{enumerable:!0,get:function(){return SMSChannel_1.SMSChannel}});var PushChannel_1=require("./channels/PushChannel");Object.defineProperty(exports,"PushChannel",{enumerable:!0,get:function(){return PushChannel_1.PushChannel}});var BaseEmailProvider_1=require("./providers/email/BaseEmailProvider");Object.defineProperty(exports,"BaseEmailProvider",{enumerable:!0,get:function(){return BaseEmailProvider_1.BaseEmailProvider}});var SendGridProvider_1=require("./providers/email/SendGridProvider");Object.defineProperty(exports,"SendGridProvider",{enumerable:!0,get:function(){return SendGridProvider_1.SendGridProvider}});var NodemailerProvider_1=require("./providers/email/NodemailerProvider");Object.defineProperty(exports,"NodemailerProvider",{enumerable:!0,get:function(){return NodemailerProvider_1.NodemailerProvider}});var BaseSMSProvider_1=require("./providers/sms/BaseSMSProvider");Object.defineProperty(exports,"BaseSMSProvider",{enumerable:!0,get:function(){return BaseSMSProvider_1.BaseSMSProvider}});var TwilioProvider_1=require("./providers/sms/TwilioProvider");Object.defineProperty(exports,"TwilioProvider",{enumerable:!0,get:function(){return TwilioProvider_1.TwilioProvider}});var BasePushProvider_1=require("./providers/push/BasePushProvider");Object.defineProperty(exports,"BasePushProvider",{enumerable:!0,get:function(){return BasePushProvider_1.BasePushProvider}});var FCMProvider_1=require("./providers/push/FCMProvider");Object.defineProperty(exports,"FCMProvider",{enumerable:!0,get:function(){return FCMProvider_1.FCMProvider}});var WebPushProvider_1=require("./providers/push/WebPushProvider");Object.defineProperty(exports,"WebPushProvider",{enumerable:!0,get:function(){return WebPushProvider_1.WebPushProvider}});var NotificationQueue_1=require("./queue/NotificationQueue");Object.defineProperty(exports,"notificationQueue",{enumerable:!0,get:function(){return NotificationQueue_1.notificationQueue}});Object.defineProperty(exports,"NotificationQueue",{enumerable:!0,get:function(){return NotificationQueue_1.NotificationQueue}});var TemplateEngine_1=require("./templates/TemplateEngine");Object.defineProperty(exports,"templateEngine",{enumerable:!0,get:function(){return TemplateEngine_1.templateEngine}});Object.defineProperty(exports,"TemplateEngine",{enumerable:!0,get:function(){return TemplateEngine_1.TemplateEngine}});var SMSTemplateEngine_1=require("./templates/SMSTemplateEngine");Object.defineProperty(exports,"smsTemplateEngine",{enumerable:!0,get:function(){return SMSTemplateEngine_1.smsTemplateEngine}});Object.defineProperty(exports,"SMSTemplateEngine",{enumerable:!0,get:function(){return SMSTemplateEngine_1.SMSTemplateEngine}});var PushTemplateEngine_1=require("./templates/PushTemplateEngine");Object.defineProperty(exports,"pushTemplateEngine",{enumerable:!0,get:function(){return PushTemplateEngine_1.pushTemplateEngine}});Object.defineProperty(exports,"PushTemplateEngine",{enumerable:!0,get:function(){return PushTemplateEngine_1.PushTemplateEngine}});__exportStar(require("./utils/phoneValidation"),exports);__exportStar(require("./utils/deviceToken"),exports);const NotificationService_2=require("./NotificationService"),InAppChannel_2=require("./channels/InAppChannel"),EmailChannel_2=require("./channels/EmailChannel"),SMSChannel_2=require("./channels/SMSChannel"),PushChannel_2=require("./channels/PushChannel");