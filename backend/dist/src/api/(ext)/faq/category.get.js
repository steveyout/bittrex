"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.metadata=void 0;const db_1=require("@b/db"),error_1=require("@b/utils/error"),sequelize_1=require("sequelize");exports.metadata={summary:"Get FAQ Categories",description:"Retrieves distinct FAQ categories.",operationId:"getFAQCategories",tags:["FAQ","User"],logModule:"FAQ",logTitle:"Get FAQ Categories",responses:{200:{description:"Categories retrieved successfully",content:{"application/json":{schema:{type:"array",items:{type:"string"}}}}},401:{description:"Unauthorized"},500:{description:"Internal Server Error"}}};exports.default=async e=>{const{ctx:t}=e;try{null==t||t.step("Fetching distinct FAQ categories");const e=await db_1.models.faq.findAll({where:{status:!0},attributes:[[(0,sequelize_1.fn)("DISTINCT",(0,sequelize_1.col)("category")),"category"]],raw:!0});null==t||t.step("Mapping categories to result array");const r=e.map(e=>e.category);null==t||t.success(`Retrieved ${r.length} categories`);return r}catch(e){console.error("Error fetching FAQ categories:",e);null==t||t.fail(e instanceof Error?e.message:"Failed to fetch FAQ categories");throw(0,error_1.createError)({statusCode:500,message:e instanceof Error?e.message:"Failed to fetch FAQ categories"})}};