"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.metadata=void 0;const db_1=require("@b/db"),error_1=require("@b/utils/error");exports.metadata={summary:"Get Roadmap Items for ICO Offering",description:"Retrieves roadmap items for the ICO offering for the authenticated creator.",operationId:"getCreatorTokenRoadmap",tags:["ICO","Creator","Roadmap"],logModule:"ICO",logTitle:"Get Token Roadmap",requiresAuth:!0,parameters:[{index:0,name:"id",in:"path",description:"ICO offering ID",required:!0,schema:{type:"string"}}],responses:{200:{description:"Roadmap items retrieved successfully."},401:{description:"Unauthorized"},404:{description:"Roadmap items not found"},500:{description:"Internal Server Error"}}};exports.default=async e=>{const{user:r,params:t,ctx:o}=e;if(!(null==r?void 0:r.id))throw(0,error_1.createError)({statusCode:401,message:"Unauthorized"});null==o||o.step("Fetching token roadmap");const{id:a}=t;if(!a)throw(0,error_1.createError)({statusCode:400,message:"No offering ID provided"});const s=await db_1.models.icoRoadmapItem.findAll({where:{offeringId:a}});if(!s)throw(0,error_1.createError)({statusCode:404,message:"Roadmap items not found"});null==o||o.success("Token roadmap retrieved successfully");return s.map(e=>e.toJSON())};