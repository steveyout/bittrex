"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.metadata=void 0;const db_1=require("@b/db"),GATEWAY_SETTINGS_KEYS=["gatewayEnabled","gatewayFeePercentage","gatewayFeeFixed","gatewayMinPaymentAmount","gatewayMaxPaymentAmount","gatewayAllowedWalletTypes","gatewayPaymentExpirationMinutes"];exports.metadata={summary:"Get gateway settings",description:"Gets public gateway settings for merchants.",operationId:"getGatewaySettings",tags:["Gateway","Settings"],responses:{200:{description:"Gateway settings"}},requiresAuth:!1,logModule:"GATEWAY",logTitle:"Get Gateway Settings"};exports.default=async e=>{const{ctx:t}=e;null==t||t.step("Fetching gateway settings");const a=await db_1.models.settings.findAll({where:{key:GATEWAY_SETTINGS_KEYS}}),s={};for(const e of a){let t=e.value;if(e.value)try{t=JSON.parse(e.value)}catch(e){}s[e.key]=t}null==t||t.success("Request completed successfully");return s};