"use strict";async function getMarket(e,r,a){var t,s,o,l;try{null===(t=null==a?void 0:a.step)||void 0===t||t.call(a,`Fetching market for ${e}/${r}`);const l=await db_1.models.ecosystemMarket.findOne({where:{currency:e,pair:r}});if(!l){null===(s=null==a?void 0:a.fail)||void 0===s||s.call(a,"Market not found");throw(0,error_1.createError)({statusCode:404,message:"Market not found"})}null===(o=null==a?void 0:a.success)||void 0===o||o.call(a,`Market found for ${e}/${r}`);return l}catch(e){"Market not found"!==e.message&&(null===(l=null==a?void 0:a.fail)||void 0===l||l.call(a,e.message));throw e}}Object.defineProperty(exports,"__esModule",{value:!0});exports.baseMarketSchema=void 0;exports.getMarket=getMarket;const db_1=require("@b/db"),error_1=require("@b/utils/error"),schema_1=require("@b/utils/schema");exports.baseMarketSchema={id:(0,schema_1.baseNumberSchema)("Market ID"),name:(0,schema_1.baseStringSchema)("Market name"),status:(0,schema_1.baseBooleanSchema)("Market status")};