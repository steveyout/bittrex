"use strict";async function initializeHttpProvider(r){if(exports.chainProviders.has(r))return exports.chainProviders.get(r);try{const e=await(0,provider_1.getProvider)(r);if(await(0,provider_1.isProviderHealthy)(e)){console_1.logger.success("ECO_PROVIDER",`Initialized HTTP provider for chain ${r}`);exports.chainProviders.set(r,e);return e}throw(0,error_1.createError)({statusCode:503,message:`HTTP provider unhealthy for chain ${r}`})}catch(e){console_1.logger.error("ECO_PROVIDER",`Error initializing HTTP provider for chain ${r}: ${e.message}`);return null}}async function initializeWebSocketProvider(r){if(exports.chainProviders.has(r)){const e=exports.chainProviders.get(r);if(e instanceof ethers_1.WebSocketProvider)return e}try{const e=await(0,provider_1.getWssProvider)(r);if(!e){console_1.logger.warn("ECO_PROVIDER",`WebSocket provider not available for chain ${r}, will use HTTP fallback`);return null}if(await(0,provider_1.isProviderHealthy)(e)){console_1.logger.success("ECO_PROVIDER",`Initialized WebSocket provider for chain ${r}`);exports.chainProviders.set(r,e);return e}console_1.logger.warn("ECO_PROVIDER",`WebSocket provider unhealthy for chain ${r}, will use HTTP fallback`);return null}catch(e){console_1.logger.error("ECO_PROVIDER",`Error initializing WebSocket provider for chain ${r}: ${e.message}`);return null}}Object.defineProperty(exports,"__esModule",{value:!0});exports.chainProviders=void 0;exports.initializeHttpProvider=initializeHttpProvider;exports.initializeWebSocketProvider=initializeWebSocketProvider;const provider_1=require("@b/api/(ext)/ecosystem/utils/provider"),ethers_1=require("ethers"),console_1=require("@b/utils/console"),error_1=require("@b/utils/error");exports.chainProviders=new Map;