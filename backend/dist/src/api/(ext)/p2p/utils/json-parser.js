"use strict";function safeParseJSON(e,r=null){if(e&&"object"==typeof e&&!Array.isArray(e))return e;if(Array.isArray(e))return e;if("string"!=typeof e)return r;if(!e||""===e.trim())return r;try{let r=JSON.parse(e);if("string"==typeof r)try{r=JSON.parse(r)}catch(e){}if("string"==typeof r&&(r.startsWith("{")||r.startsWith("[")))try{r=JSON.parse(r)}catch(e){}return r}catch(e){console_1.logger.warn("JSON",`Failed to parse value: ${e instanceof Error?e.message:"Unknown error"}`);return r}}function parseAmountConfig(e){const r=safeParseJSON(e);return r&&"object"==typeof r?{total:Number(r.total)||0,min:Number(r.min)||0,max:Number(r.max)||0,availableBalance:r.availableBalance?Number(r.availableBalance):void 0,originalTotal:r.originalTotal?Number(r.originalTotal):void 0}:{total:0,min:0,max:0}}function parsePriceConfig(e){const r=safeParseJSON(e);return r&&"object"==typeof r?{model:r.model||"FIXED",value:Number(r.value)||0,marketPrice:r.marketPrice?Number(r.marketPrice):void 0,finalPrice:Number(r.finalPrice)||Number(r.value)||0,currency:r.currency}:{model:"FIXED",value:0,finalPrice:0}}function parseTradeSettings(e){const r=safeParseJSON(e);return r&&"object"==typeof r?{autoCancel:Number(r.autoCancel)||30,kycRequired:Boolean(r.kycRequired),visibility:r.visibility||"PUBLIC",termsOfTrade:r.termsOfTrade||"",additionalNotes:r.additionalNotes}:{autoCancel:30,kycRequired:!1,visibility:"PUBLIC",termsOfTrade:""}}function parseLocationSettings(e){const r=safeParseJSON(e);return r&&"object"==typeof r?{country:r.country||"",region:r.region,city:r.city,restrictions:Array.isArray(r.restrictions)?r.restrictions:void 0}:{country:""}}function parseUserRequirements(e){const r=safeParseJSON(e);return r&&"object"==typeof r?{minCompletedTrades:r.minCompletedTrades?Number(r.minCompletedTrades):void 0,minSuccessRate:r.minSuccessRate?Number(r.minSuccessRate):void 0,minAccountAge:r.minAccountAge?Number(r.minAccountAge):void 0,trustedOnly:r.trustedOnly?Boolean(r.trustedOnly):void 0}:{}}Object.defineProperty(exports,"__esModule",{value:!0});exports.safeParseJSON=safeParseJSON;exports.parseAmountConfig=parseAmountConfig;exports.parsePriceConfig=parsePriceConfig;exports.parseTradeSettings=parseTradeSettings;exports.parseLocationSettings=parseLocationSettings;exports.parseUserRequirements=parseUserRequirements;const console_1=require("@b/utils/console");