"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.metadata=void 0;const query_1=require("@b/utils/query"),utils_1=require("../utils"),db_1=require("@b/db"),error_1=require("@b/utils/error");exports.metadata={summary:"Retrieves detailed information of a specific forex investment by ID",operationId:"getForexInvestmentById",tags:["Forex","Investments"],logModule:"FOREX",logTitle:"Get Forex Investment",parameters:[{index:0,name:"id",in:"path",required:!0,description:"ID of the forex investment to retrieve",schema:{type:"string"}}],responses:{200:{description:"Forex investment details",content:{"application/json":{schema:{type:"object",properties:utils_1.baseForexInvestmentSchema}}}},401:query_1.unauthorizedResponse,404:(0,query_1.notFoundMetadataResponse)("Forex Investment"),500:query_1.serverErrorResponse},requiresAuth:!0};exports.default=async e=>{const{params:r,user:t,ctx:s}=e;null==s||s.step("Fetching Forex Investment");if(!(null==t?void 0:t.id))throw(0,error_1.createError)({statusCode:401,message:"Unauthorized"});try{const e=await db_1.models.forexInvestment.findOne({where:{id:r.id,userId:t.id},include:[{model:db_1.models.user,as:"user",attributes:["id","firstName","lastName","email","avatar"]},{model:db_1.models.forexPlan,as:"plan",attributes:["id","name","title","description","profitPercentage","image","currency"]},{model:db_1.models.forexDuration,as:"duration",attributes:["id","duration","timeframe"]}]});if(!e)throw(0,error_1.createError)({statusCode:404,message:"Forex investment not found"});null==s||s.success("Get Forex Investment fetched successfully");return e}catch(e){if(e.statusCode)throw e;console.error("Error fetching forex investment:",e);throw(0,error_1.createError)({statusCode:500,message:"Internal Server Error"})}};