"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.metadata=void 0;const query_1=require("@b/utils/query"),utils_1=require("../utils");exports.metadata={summary:"Updates a specific affiliate condition",description:"Updates an existing affiliate condition's configuration including reward amounts, types, wallet settings, blockchain details, status, and associated images. Allows modification of all condition parameters except the condition type itself.",operationId:"updateAffiliateCondition",tags:["Admin","Affiliate","Condition"],parameters:[{name:"id",in:"path",description:"ID of the affiliate condition to update",required:!0,schema:{type:"string"}}],requestBody:{description:"Updated affiliate condition data",content:{"application/json":{schema:utils_1.mlmReferralConditionUpdateSchema}}},responses:(0,query_1.updateRecordResponses)("Affiliate Condition"),requiresAuth:!0,permission:"edit.affiliate.condition",logModule:"ADMIN_AFFILIATE",logTitle:"Update affiliate condition"};exports.default=async e=>{const{body:i,params:t,ctx:a}=e,{id:d}=t;null==a||a.step("Validating update data");const o={};void 0!==i.title&&(o.title=i.title);void 0!==i.description&&(o.description=i.description);void 0!==i.reward&&(o.reward=i.reward);void 0!==i.rewardType&&(o.rewardType=i.rewardType);void 0!==i.rewardWalletType&&(o.rewardWalletType=i.rewardWalletType);void 0!==i.rewardCurrency&&(o.rewardCurrency=i.rewardCurrency);void 0!==i.rewardChain&&(o.rewardChain=i.rewardChain);void 0!==i.minAmount&&(o.minAmount=i.minAmount);void 0!==i.image&&(o.image=i.image);void 0!==i.status&&(o.status=i.status);null==a||a.step(`Updating condition record with ID: ${d}`);const r=await(0,query_1.updateRecord)("mlmReferralCondition",d,o);null==a||a.success("Condition updated successfully");return r};