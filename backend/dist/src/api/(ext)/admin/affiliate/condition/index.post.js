"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.metadata=void 0;const query_1=require("@b/utils/query"),utils_1=require("./utils");exports.metadata={summary:"Creates a new affiliate condition",description:"Creates a new affiliate condition with specified reward parameters. Conditions define how affiliates earn rewards based on referral actions such as deposits, trades, investments, and more. Supports various reward types (percentage or fixed) and wallet types (FIAT, SPOT, ECO).",operationId:"createAffiliateCondition",tags:["Admin","Affiliate","Condition"],requestBody:{required:!0,content:{"application/json":{schema:utils_1.mlmReferralConditionUpdateSchema}}},responses:(0,query_1.storeRecordResponses)(utils_1.mlmReferralConditionStoreSchema,"Affiliate Condition"),requiresAuth:!0,permission:"create.affiliate.condition",logModule:"ADMIN_AFFILIATE",logTitle:"Create affiliate condition"};exports.default=async e=>{const{body:t,ctx:r}=e,{name:i,title:a,description:o,type:n,reward:s,rewardType:d,rewardWalletType:l,rewardCurrency:c,rewardChain:u,status:p,image:f}=t;null==r||r.step("Validating condition data");null==r||r.step("Creating condition record");const m=await(0,query_1.storeRecord)({model:"mlmReferralCondition",data:{name:i,title:a,description:o,type:n,reward:s,rewardType:d,rewardWalletType:l,rewardCurrency:c,rewardChain:u,status:p,image:f}});null==r||r.success("Condition created successfully");return m};