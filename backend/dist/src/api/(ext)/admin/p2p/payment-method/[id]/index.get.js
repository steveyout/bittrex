"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.metadata=void 0;const db_1=require("@b/db"),error_1=require("@b/utils/error");exports.metadata={summary:"Get P2P Payment Method by ID (Admin)",description:"Retrieves a single payment method by its ID.",operationId:"getP2PPaymentMethodById",tags:["Admin","P2P","Payment Method"],requiresAuth:!0,logModule:"ADMIN_P2P",logTitle:"Get P2P Payment Method",permission:"view.p2p.payment_method",parameters:[{name:"id",in:"path",description:"Payment method ID",required:!0,schema:{type:"string"}}],responses:{200:{description:"Payment method retrieved successfully."},401:{description:"Unauthorized."},403:{description:"Forbidden - Admin access required."},404:{description:"Payment method not found."},500:{description:"Internal Server Error."}},demoMask:["user.email"]};exports.default=async e=>{const{params:t,user:r,ctx:s}=e;if(!(null==r?void 0:r.id))throw(0,error_1.createError)({statusCode:401,message:"Unauthorized"});try{null==s||s.step("Fetching data");const e=await db_1.models.p2pPaymentMethod.findOne({where:{id:t.id,deletedAt:null},include:[{association:"user",attributes:["id","firstName","lastName","email"]}]});if(!e)throw(0,error_1.createError)({statusCode:404,message:"Payment method not found"});null==s||s.success("Operation completed successfully");return{id:e.id,userId:e.userId,name:e.name,icon:e.icon,description:e.description,instructions:e.instructions,metadata:e.metadata,processingTime:e.processingTime,fees:e.fees,available:e.available,isGlobal:e.isGlobal,popularityRank:e.popularityRank,createdAt:e.createdAt,updatedAt:e.updatedAt,user:e.user}}catch(e){if(e.statusCode)throw e;throw(0,error_1.createError)({statusCode:500,message:"Failed to get payment method: "+e.message})}};