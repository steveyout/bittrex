"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.metadata=void 0;const db_1=require("@b/db"),error_1=require("@b/utils/error"),errors_1=require("@b/utils/schema/errors");exports.metadata={summary:"Update FAQ Question Status",description:"Updates the status of a user-submitted FAQ question. Status can be PENDING, ANSWERED, or REJECTED.",operationId:"updateFaqQuestionStatus",tags:["Admin","FAQ","Questions"],requiresAuth:!0,parameters:[{index:0,name:"id",in:"path",required:!0,schema:{type:"string",format:"uuid"},description:"FAQ question ID"}],requestBody:{required:!0,content:{"application/json":{schema:{type:"object",properties:{status:{type:"string",enum:["PENDING","ANSWERED","REJECTED"],description:"New status for the FAQ question"}},required:["status"]}}}},responses:{200:{description:"FAQ question status updated successfully",content:{"application/json":{schema:{type:"object",description:"Updated question object"}}}},400:errors_1.badRequestResponse,401:errors_1.unauthorizedResponse,404:(0,errors_1.notFoundResponse)("FAQ question"),500:errors_1.serverErrorResponse},permission:"edit.faq.question",logModule:"ADMIN_FAQ",logTitle:"Update FAQ question status"};exports.default=async e=>{const{user:t,params:s,body:r,ctx:o}=e;if(!(null==t?void 0:t.id))throw(0,error_1.createError)({statusCode:401,message:"Unauthorized"});const{id:u}=s,{status:a}=r;if(!u||!a){null==o||o.fail("Question ID and status are required");throw(0,error_1.createError)({statusCode:400,message:"Question ID and status are required"})}try{null==o||o.step("Fetching FAQ question");const e=await db_1.models.faqQuestion.findByPk(u);if(!e){null==o||o.fail("FAQ question not found");throw(0,error_1.createError)({statusCode:404,message:"FAQ question not found"})}null==o||o.step("Updating question status");await e.update({status:a});null==o||o.success("FAQ question status updated successfully");return e}catch(e){console.error("Error updating FAQ question status:",e);null==o||o.fail("Failed to update FAQ question status");throw(0,error_1.createError)({statusCode:500,message:e instanceof Error?e.message:"Failed to update FAQ question status"})}};