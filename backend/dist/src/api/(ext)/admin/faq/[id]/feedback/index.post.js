"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.metadata=void 0;const db_1=require("@b/db"),error_1=require("@b/utils/error"),errors_1=require("@b/utils/schema/errors");exports.metadata={summary:"Submit Feedback for FAQ",description:"Creates a new feedback record for a specific FAQ. Users can indicate if the FAQ was helpful and optionally provide a comment.",operationId:"submitFaqFeedback",tags:["Admin","FAQ","Feedback"],requiresAuth:!0,parameters:[{index:0,name:"id",in:"path",required:!0,schema:{type:"string",format:"uuid"},description:"FAQ ID"}],requestBody:{required:!0,content:{"application/json":{schema:{type:"object",properties:{isHelpful:{type:"boolean",description:"Indicates if the FAQ was helpful"},comment:{type:"string",description:"Optional feedback comment"}},required:["isHelpful"]}}}},responses:{200:{description:"Feedback submitted successfully",content:{"application/json":{schema:{type:"object",description:"Created feedback record"}}}},400:errors_1.badRequestResponse,401:errors_1.unauthorizedResponse,500:errors_1.serverErrorResponse},permission:"create.faq.feedback",logModule:"ADMIN_FAQ",logTitle:"Submit FAQ feedback"};exports.default=async e=>{const{params:r,body:s,ctx:t}=e,{id:a}=r;if(!a||"boolean"!=typeof s.isHelpful){null==t||t.fail("FAQ ID and isHelpful are required");throw(0,error_1.createError)({statusCode:400,message:"FAQ ID and isHelpful are required"})}try{null==t||t.step("Creating feedback record");const e=await db_1.models.faqFeedback.create({faqId:a,isHelpful:s.isHelpful,comment:s.comment});null==t||t.success("Feedback submitted successfully");return e}catch(e){console.error("Error submitting FAQ feedback:",e);null==t||t.fail("Failed to submit feedback");throw(0,error_1.createError)({statusCode:500,message:e instanceof Error?e.message:"Failed to submit feedback"})}};