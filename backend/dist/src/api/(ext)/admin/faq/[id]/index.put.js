"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.metadata=void 0;const db_1=require("@b/db"),error_1=require("@b/utils/error"),errors_1=require("@b/utils/schema/errors");exports.metadata={summary:"Update Single FAQ",description:"Updates an existing FAQ entry by ID. Allows partial updates of FAQ fields including question, answer, category, tags, status, order, and related FAQs.",operationId:"updateFaq",tags:["Admin","FAQ","Update"],requiresAuth:!0,parameters:[{index:0,name:"id",in:"path",required:!0,schema:{type:"string",format:"uuid"},description:"FAQ ID to update"}],requestBody:{required:!0,content:{"application/json":{schema:{type:"object",properties:{question:{type:"string",description:"FAQ question"},answer:{type:"string",description:"FAQ answer"},image:{type:"string",description:"Image URL"},category:{type:"string",description:"FAQ category"},tags:{type:"array",items:{type:"string"},description:"FAQ tags"},status:{type:"boolean",description:"Active status"},order:{type:"number",description:"Display order"},pagePath:{type:"string",description:"Page path"},relatedFaqIds:{type:"array",items:{type:"string",format:"uuid"},description:"Related FAQ IDs"}}}}}},responses:{200:{description:"FAQ updated successfully",content:{"application/json":{schema:{type:"object",description:"Updated FAQ object"}}}},400:errors_1.badRequestResponse,401:errors_1.unauthorizedResponse,404:(0,errors_1.notFoundResponse)("FAQ"),500:errors_1.serverErrorResponse},permission:"edit.faq",logModule:"ADMIN_FAQ",logTitle:"Update FAQ entry"};exports.default=async e=>{const{user:t,params:r,body:s,ctx:a}=e;if(!(null==t?void 0:t.id))throw(0,error_1.createError)({statusCode:401,message:"Unauthorized"});null==a||a.step("Fetching FAQ");const o=await db_1.models.faq.findByPk(r.id);if(!o){null==a||a.fail("FAQ not found");throw(0,error_1.createError)({statusCode:404,message:"FAQ not found"})}const{question:i,answer:n,image:d,category:p,tags:u,status:c,order:l,pagePath:g,relatedFaqIds:y}=s;if(void 0!==g&&""===g){null==a||a.fail("pagePath cannot be empty");throw(0,error_1.createError)({statusCode:400,message:"pagePath cannot be empty"})}null==a||a.step("Updating FAQ");await o.update({question:i,answer:n,image:d,category:p,tags:u,status:c,order:l,pagePath:g,relatedFaqIds:y});null==a||a.success("FAQ updated successfully");return o};