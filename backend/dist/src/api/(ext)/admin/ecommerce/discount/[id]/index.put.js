"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.metadata=void 0;const query_1=require("@b/utils/query"),utils_1=require("../utils");exports.metadata={summary:"Updates a specific ecommerce discount by ID",operationId:"updateEcommerceDiscountById",description:"Updates an existing ecommerce discount's properties including code, percentage, validity date, product association, and status. All fields are required. The discount code must remain unique and the percentage must be between 0 and 100.",tags:["Admin","Ecommerce","Discount"],parameters:[{index:0,name:"id",in:"path",description:"ID of the ecommerce discount to update",required:!0,schema:{type:"string"}}],requestBody:{required:!0,description:"Updated discount data",content:{"application/json":{schema:utils_1.discountUpdateSchema}}},responses:(0,query_1.updateRecordResponses)("Ecommerce Discount"),requiresAuth:!0,permission:"edit.ecommerce.discount",logModule:"ADMIN_ECOM",logTitle:"Update discount"};exports.default=async e=>{const{body:t,params:s,ctx:i}=e,{id:d}=s,{code:c,percentage:o,validUntil:a,productId:u,status:n}=t;null==i||i.step("Validating discount data");null==i||i.step(`Updating discount: ${d}`);const r=await(0,query_1.updateRecord)("ecommerceDiscount",d,{code:c,percentage:o,validUntil:a,productId:u,status:n});null==i||i.success("Discount updated successfully");return r};