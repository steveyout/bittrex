"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.metadata=void 0;const constants_1=require("@b/utils/constants"),db_1=require("@b/db"),currency_1=require("@b/utils/currency"),cache_1=require("@b/utils/cache");exports.metadata={summary:"Get form structure data for ecommerce products",operationId:"getEcommerceProductStructureData",tags:["Admin","Ecommerce","Product"],description:"Retrieves form structure data including available categories, wallet types, and currency conditions for creating or editing ecommerce products",responses:{200:{description:"Form structure data retrieved successfully",content:constants_1.structureSchema}},requiresAuth:!0,permission:"view.ecommerce.product"};exports.default=async e=>{const{ctx:t}=e;null==t||t.step("Fetching product form structure data");const r=(await db_1.models.ecommerceCategory.findAll()).map(e=>({value:e.id,label:e.name})),c=[{value:"FIAT",label:"Fiat"},{value:"SPOT",label:"Spot"}],a=await(0,currency_1.getCurrencyConditions)(),s=cache_1.CacheManager.getInstance();(await s.getExtensions()).has("ecosystem")&&c.push({value:"ECO",label:"Funding"});null==t||t.success("Retrieved product data successfully");return{categories:r,walletTypes:c,currencyConditions:a}};