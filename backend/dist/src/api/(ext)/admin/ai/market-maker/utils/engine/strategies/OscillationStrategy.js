"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.OscillationStrategy=void 0;class OscillationStrategy{constructor(){this.name="oscillation";this.phases=new Map;this.lastUpdate=new Map}calculate(e,t,s){const a=Number(e)/1e18,r=`${a}_${Number(t)/1e18}`;let i=this.phases.get(r)||Math.random()*Math.PI*2;const n=this.lastUpdate.get(r)||Date.now();i+=(Date.now()-n)/1e3*this.getPhaseIncrement(s.aggressionLevel);this.phases.set(r,i);this.lastUpdate.set(r,Date.now());const o=this.getAmplitude(s.aggressionLevel),l=Math.sin(i)*o,c=(Math.random()-.5)*o*.2,u=l+c>0?"BUY":"SELL",d=Math.abs(l+c),h=s.priceRangeLow,p=s.priceRangeHigh;if(a<=1.02*h&&"SELL"===u)return{shouldTrade:!0,direction:"BUY",priceAdjustment:o,sizeMultiplier:1.2,confidence:.8,reason:"Near lower range boundary, pushing up"};if(a>=.98*p&&"BUY"===u)return{shouldTrade:!0,direction:"SELL",priceAdjustment:o,sizeMultiplier:1.2,confidence:.8,reason:"Near upper range boundary, pushing down"};return{shouldTrade:!0,direction:u,priceAdjustment:d,sizeMultiplier:.8,confidence:.8*Math.abs(Math.sin(i)),reason:`Oscillation ${u} (phase: ${(i%(2*Math.PI)).toFixed(2)})`}}getAmplitude(e){switch(e){case"AGGRESSIVE":return.3;case"MODERATE":return.15;default:return.08}}getPhaseIncrement(e){switch(e){case"AGGRESSIVE":return.5;case"MODERATE":return.3;default:return.15}}}exports.OscillationStrategy=OscillationStrategy;exports.default=OscillationStrategy;