"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.metadata=void 0;const db_1=require("@b/db"),query_1=require("@b/utils/query");exports.metadata={summary:"Deletes a Forex withdrawal transaction",description:"Deletes a specific Forex withdrawal transaction by its ID. This also removes associated admin profit records.",operationId:"deleteForexWithdrawal",tags:["Admin","Forex","Withdraw"],parameters:(0,query_1.deleteRecordParams)("transaction"),responses:(0,query_1.deleteRecordResponses)("Transaction"),logModule:"ADMIN_FOREX",logTitle:"Delete forex withdrawal",requiresAuth:!0,permission:"delete.forex.withdraw"};exports.default=async e=>{const{params:r,query:t,ctx:a}=e;null==a||a.step(`Validating record ${r.id}`);null==a||a.step(`Deleting record ${r.id}`);await db_1.models.adminProfit.destroy({where:{transactionId:r.id}});const s=await(0,query_1.handleSingleDelete)({model:"transaction",id:r.id,query:t});null==a||a.success("Record deleted successfully");return s};