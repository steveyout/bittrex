"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.metadata=void 0;const query_1=require("@b/utils/query"),error_1=require("@b/utils/error"),errors_1=require("@b/utils/schema/errors");exports.metadata={summary:"Update ICO Launch Plan",description:"Updates an existing ICO launch plan configuration including pricing, features, and display settings.",operationId:"updateIcoLaunchPlan",tags:["Admin","ICO","Settings"],parameters:[{index:0,name:"id",in:"path",description:"ID of the launch plan to update",required:!0,schema:{type:"string"}}],requestBody:{description:"New data for the launch plan configuration",content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"Plan name"},description:{type:"string",description:"Plan description"},price:{type:"number",description:"Plan price"},currency:{type:"string",description:"Currency code"},walletType:{type:"string",description:"Wallet type"},features:{type:"object",description:"Plan features"},recommended:{type:"boolean",description:"Is recommended"},status:{type:"boolean",description:"Plan status"},sortOrder:{type:"number",description:"Sort order"}},required:["name","description","price","currency","walletType","features"]}}}},responses:{200:{description:"Launch plan updated successfully",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}},400:errors_1.badRequestResponse,401:errors_1.unauthorizedResponse,404:(0,errors_1.notFoundResponse)("Launch Plan"),500:errors_1.serverErrorResponse},requiresAuth:!0,permission:"edit.ico.settings",logModule:"ADMIN_ICO",logTitle:"Update launch plan"};exports.default=async e=>{const{body:r,params:t,ctx:s}=e,{id:n}=t,{name:i,description:a,price:o,currency:p,walletType:c,features:d,recommended:u,status:l,sortOrder:y}=r;null==s||s.step("Validating launch plan data");if(!(i&&a&&void 0!==o&&p&&c&&d)){null==s||s.fail("Missing required fields");throw(0,error_1.createError)({statusCode:400,message:"Missing required fields: name, description, price, currency, walletType, features"})}null==s||s.step("Updating launch plan");const m=await(0,query_1.updateRecord)("icoLaunchPlan",n,{name:i,description:a,price:o,currency:p,walletType:c,features:d,recommended:u||!1,status:void 0===l||l,sortOrder:y||0});null==s||s.success("Launch plan updated successfully");return m};