"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.metadata=void 0;const query_1=require("@b/utils/query"),error_1=require("@b/utils/error"),errors_1=require("@b/utils/schema/errors");exports.metadata={summary:"Update ICO Launch Plan Status",description:"Updates only the status field of a launch plan. Used to enable or disable plans for token offering creators.",operationId:"updateIcoLaunchPlanStatus",tags:["Admin","ICO","Settings"],parameters:[{index:0,name:"id",in:"path",description:"ID of the launch plan to update status",required:!0,schema:{type:"string"}}],requestBody:{description:"New status for the launch plan",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Plan status"}},required:["status"]}}}},responses:{200:{description:"Launch plan status updated successfully",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}},400:errors_1.badRequestResponse,401:errors_1.unauthorizedResponse,404:(0,errors_1.notFoundResponse)("Launch Plan"),500:errors_1.serverErrorResponse},requiresAuth:!0,permission:"edit.ico.settings",logModule:"ADMIN_ICO",logTitle:"Update launch plan status"};exports.default=async e=>{const{body:s,params:t,ctx:a}=e,{id:r}=t,{status:n}=s;null==a||a.step("Validating status field");if(void 0===n){null==a||a.fail("Missing required field: status");throw(0,error_1.createError)({statusCode:400,message:"Missing required field: status"})}null==a||a.step("Updating launch plan status");const o=await(0,query_1.updateRecord)("icoLaunchPlan",r,{status:n});null==a||a.success("Launch plan status updated successfully");return o};